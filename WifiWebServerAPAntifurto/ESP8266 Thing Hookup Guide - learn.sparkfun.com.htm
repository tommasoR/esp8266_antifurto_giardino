<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
          <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- mobile mode if small screen device -->
    
    <title>ESP8266 Thing Hookup Guide - learn.sparkfun.com</title>

    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="ESP8266%20Thing%20Hookup%20Guide%20-%20learn.sparkfun.com_files/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="ESP8266%20Thing%20Hookup%20Guide%20-%20learn.sparkfun.com_files/theme.css" type="text/css" media="screen">    <link rel="alternate" type="application/atom+xml" title="Education Blog" href="https://learn.sparkfun.com/feeds/blog">
    <link rel="alternate" type="application/atom+xml" title="Tutorials" href="https://learn.sparkfun.com/feeds/tutorials">
    <link rel="alternate" type="application/atom+xml" title="Education Blog Comments" href="https://learn.sparkfun.com/feeds/blog_comments">
    <link rel="alternate" type="application/atom+xml" title="Tutorial Comments" href="https://learn.sparkfun.com/feeds/tutorial_comments">

    <script src="ESP8266%20Thing%20Hookup%20Guide%20-%20learn.sparkfun.com_files/analytics.js" async=""></script><script type="text/javascript">
          var SFECONFIG = {
      currencies: {"USD":{"code":"USD","title":"US Dollar","symbol_left":"$","symbol_right":"","decimal_point":".","thousands_point":",","decimal_places":"2","value":"1.0000"},"CAD":{"code":"CAD","title":"Canadian Dollar","symbol_left":"$","symbol_right":" CAD","decimal_point":".","thousands_point":",","decimal_places":"2","value":"1.3327"},"AUD":{"code":"AUD","title":"Australian Dollar","symbol_left":"$","symbol_right":" AUD","decimal_point":".","thousands_point":",","decimal_places":"2","value":"1.4096"},"GBP":{"code":"GBP","title":"British Pound","symbol_left":"&pound;","symbol_right":"","decimal_point":".","thousands_point":",","decimal_places":"2","value":"0.6582"},"EUR":{"code":"EUR","title":"Euro","symbol_left":"&euro;","symbol_right":"","decimal_point":".","thousands_point":",","decimal_places":"2","value":"0.9402"}},
      dnt: false,
      preferred_currency: 'USD',
        http_server: 'http://www.sparkfun.com',
        https_server: 'https://www.sparkfun.com',
        http_static: 'https://cdn.sparkfun.com',
        base_url: '/',
        url: '/',
        controller: 'tutorials',
        action: 'view',
        entity_id: '',
        auth: false,
        sparkrev: '1447609205',
        search_key: 'qLqN6uVRKXnjHd2QapGm'      };
      var require = {
        paths: {
          'jqueryui': 'https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min'
        },
        baseUrl: '/js/',
        urlArgs: "sparkrev=" + SFECONFIG.sparkrev,
        deps: ['jqueryui'],
        callback: function() {
          $('#learn').learn();
          $('#learn').sfeutil();
        }
      };
    </script>
    <script src="ESP8266%20Thing%20Hookup%20Guide%20-%20learn.sparkfun.com_files/learn-built.js"></script>
          <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-3404365-1', 'auto', {'allowLinker': true});
      ga('require', 'linker');
      ga('linker:autoLink', ['www.sparkfun.com', 'avc.sparkfun.com'] );
      ga('require', 'displayfeatures');
            ga('set', 'dimension1', 'Guest');
      ga('send', 'pageview');

      </script>
      <script src="ESP8266%20Thing%20Hookup%20Guide%20-%20learn.sparkfun.com_files/jquery-ui.js" data-requiremodule="jqueryui" data-requirecontext="_" async="" charset="utf-8" type="text/javascript"></script><script src="ESP8266%20Thing%20Hookup%20Guide%20-%20learn.sparkfun.com_files/tutorial.js" data-requiremodule="tutorial" data-requirecontext="_" async="" charset="utf-8" type="text/javascript"></script><script src="ESP8266%20Thing%20Hookup%20Guide%20-%20learn.sparkfun.com_files/rainbow.js" data-requiremodule="rainbow" data-requirecontext="_" async="" charset="utf-8" type="text/javascript"></script><script src="ESP8266%20Thing%20Hookup%20Guide%20-%20learn.sparkfun.com_files/generic.js" data-requiremodule="generic" data-requirecontext="_" async="" charset="utf-8" type="text/javascript"></script><script src="ESP8266%20Thing%20Hookup%20Guide%20-%20learn.sparkfun.com_files/c.js" data-requiremodule="c" data-requirecontext="_" async="" charset="utf-8" type="text/javascript"></script><script src="ESP8266%20Thing%20Hookup%20Guide%20-%20learn.sparkfun.com_files/ZeroClipboard.js" data-requiremodule="ZeroClipboard.min" data-requirecontext="_" async="" charset="utf-8" type="text/javascript"></script></head>

  <body id="learn" class="layout-default no-type tutorials-view no-touch" ontouchstart="">
    <div class="wrapper" itemscope="" itemtype="http://schema.org/WebSite">
      <meta itemprop="url" content="https://www.sparkfun.com/">
      <div class="wrapper-inner">

    
<div class="header">
  <div class="container">

<!-- Mobile Nav Button -->
<div class="mobile-menu-container left">
  <a id="nav_toggle" class="mobile-menu-button nav_toggle" href="#"><span>≡</span></a>
      <a id="search_toggle" class="mobile-menu-button" href="#"><span class="glyphicon glyphicon-search"></span></a>
  </div>

<nav class="top-links">
  &nbsp;
</nav>

<!-- Logo -->
<div class="logo-container">
  <a class="logo" href="https://www.sparkfun.com/">
    <span class="sfe-icon-flame"></span>
    <span class="sfe-icon-sparkfun" data-icon="🔥">
      <span class="visuallyhidden">sparkfun.com</span>
    </span>
  </a>
</div>

<!-- Tabs -->
<!-- also edit mobile tabs in .main-nav -->
<nav class="tabs-container">
  <ul>
    <li class="shop "><a href="https://www.sparkfun.com/">Shop</a></li>
    <li class="learn active"><a href="https://learn.sparkfun.com/">Learn</a></li>
    <li class="avc "><a href="https://avc.sparkfun.com/"><span class="sfe-icon-avc"><span class="visuallyhidden">AVC</span></span></a></li>
    <li class="forum "><a href="https://forum.sparkfun.com/">Forum</a></li>
    <li class="data "><a href="https://data.sparkfun.com/">Data</a></li>
  </ul>
</nav>

<!-- Cart & User -->
<div class="user-container mobile-menu-container right">

  <a id="account_toggle" class="mobile-menu-button" href="#"><span class="glyphicon glyphicon-user"></span></a>

  
      <div class="user">
      <!-- login modal trigger -->
      <a class="btn btn-default" href="https://www.sparkfun.com/account/login?redirect=%2Flearn%2Ftutorials%2Fesp8266-thing-hookup-guide%2Fexample-sketch-ap-web-server" data-toggle="modal" data-target="#login_modal" data-remote="false">log in</a>
      <a class="btn btn-default" href="https://www.sparkfun.com/account/make">register</a>    </div>
  
</div>

<!-- Navigation / Search -->
<div class="main-nav-container">

  <nav class="main-nav">
    <ul>
      <li class="tab shop ">
        <a href="https://www.sparkfun.com/">Shop</a>      </li>
      <li class="tab learn active">
        <a href="https://learn.sparkfun.com/">Learn</a>      </li>
      
<li class="start-a-project ">
  <a href="https://learn.sparkfun.com/start_a_project">Start a Project</a></li>
<li><a href="https://learn.sparkfun.com/blog">EDU Blog</a></li>
<li><a href="https://learn.sparkfun.com/resources">Resources</a></li>
<li class="active"><a href="https://learn.sparkfun.com/tutorials">Tutorials</a></li>
<li><a href="https://learn.sparkfun.com/events">Classes</a></li>
<li><a href="https://learn.sparkfun.com/calendar">Calendar</a></li>
<li><a href="https://learn.sparkfun.com/workshops">Workshops</a></li>
<li><a href="https://learn.sparkfun.com/contact">Contact</a></li>

      <li class="desktop-toggle">
        <a href="https://www.sparkfun.com/account/mobile_toggle?redirect=%2Flearn%2Ftutorials%2Fesp8266-thing-hookup-guide%2Fexample-sketch-ap-web-server">Desktop Site</a>      </li>
    </ul>
  </nav>

      <form id="search_form" class="search" action="https://www.sparkfun.com/search/results" method="get" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction">
      <meta itemprop="target" content="https://www.sparkfun.com/search/results?term={term}">
      <div class="ui-widget">
        <span class="ui-helper-hidden-accessible" aria-live="polite" role="status"></span><input name="term" id="global-search" class="form-control ui-autocomplete-input" placeholder="search..." itemprop="query-input" autocomplete="off" type="text">
      </div>
    </form>
  
</div>

  </div>
</div>


    
    <div class="content">
      <div class="container">

        
        
<div class="main-title">
  <ul class="breadcrumb">
    <li><a href="https://learn.sparkfun.com/">Home</a></li>
    <li><a href="https://learn.sparkfun.com/tutorials">Tutorials</a></li>
    <li>ESP8266 Thing Hookup Guide</li>
      </ul>

  <h1>
    ESP8266 Thing Hookup Guide  </h1>

</div>


<a id="nav_toggle_pages" class="nav_toggle" href="#"><span>≡</span> Pages</a>

<div class="row">

  <div class="col-sm-8 tutorial-page">

    <div class="contributors">
                      Contributors:
                <a href="https://www.sparkfun.com/users/69916"><img src="ESP8266%20Thing%20Hookup%20Guide%20-%20learn.sparkfun.com_files/f2ed505f510e392f58811e4aa03e6fe0.txt"> Jimb0</a>          </div>

    <span class="fave_widget verbose">
  <a href="#" class="fave_btn " title="Add to favorites" data-entity="learn_tutorials" data-entity-id="365">
    <span class="fave_yes">
      <span class="glyphicon glyphicon-heart"></span>
      <span class="name">Favorited</span>
    </span>
    <span class="fave_no">
      <span class="glyphicon glyphicon-heart-empty"></span>
      <span class="name">Favorite</span>
    </span>
  </a>
  <span class="fave_count">9</span>
</span>    <div class="share-link-inline">

  <a class="share-link-toggle" href="#">
    <span class="share-title">
      <span class="sfe-icon-share"></span>
      Share    </span>
  </a>

  <div class="share-link-inner dialog">
    Use this URL to share:<br>
    <input class="form-control input-sm" value="http://sfe.io/t365" onclick="$(this).select();" type="text">

    <div class="share-social">

      <a rel="nofollow" onclick="return $(this).sfeutil('track_link',this,'Share','clicked','googleplus');" href="https://plus.google.com/share?url=http%3A%2F%2Fsfe.io%2Ft365" title="Share on Google+"><span class="sfe-icon-google-plus hidetext"><span>Share on Google+</span></span></a>

      <a rel="nofollow" onclick="return $(this).sfeutil('track_link',this,'Share','clicked','tumblr');" href="https://www.tumblr.com/share/link?url=http%3A%2F%2Fsfe.io%2Ft365&amp;name=ESP8266+Thing+Hookup+Guide" title="Share on Tumblr"><span class="sfe-icon-tumblr hidetext"><span>Share on Tumblr</span></span></a>

      <a rel="nofollow" onclick="return $(this).sfeutil('track_link',this,'Share','clicked','reddit');" href="https://www.reddit.com/submit?url=http%3A%2F%2Fsfe.io%2Ft365" title="Submit to reddit"><span class="sfe-icon-reddit hidetext"><span>Submit to reddi</span></span></a>

    </div>

    </div>
  
  <div class="share-social">

    <a rel="nofollow" onclick="return $(this).sfeutil('track_link',this,'Share','clicked','twitter');" href="https://twitter.com/intent/tweet?text=ESP8266+Thing+Hookup+Guide&amp;url=http%3A%2F%2Fsfe.io%2Ft365&amp;via=sparkfun" title="Share on Twitter"><span class="sfe-icon-twitter hidetext"><span>Share on Twitter</span></span></a>

    <a rel="nofollow" onclick="return $(this).sfeutil('track_link',this,'Share','clicked','facebook');" href="http://www.facebook.com/sharer.php?u=http%3A%2F%2Fsfe.io%2Ft365&amp;t=ESP8266+Thing+Hookup+Guide" title="Share on Facebook"><span class="sfe-icon-facebook-nobox hidetext"><span>Share on Facebook</span></span></a>

          <a rel="nofollow" onclick="return $(this).sfeutil('track_link',this,'Share','clicked','pinterest');" href="https://www.pinterest.com/pin/create/button/?url=http%3A%2F%2Fsfe.io%2Ft365&amp;media=https%3A%2F%2Fcdn.sparkfun.com%2F%2Fr%2F500-1000%2Fassets%2Flearn_tutorials%2F3%2F6%2F5%2Fproduct-angled.jpg&amp;description=ESP8266+Thing+Hookup+Guide" title="Pin It"><span class="sfe-icon-pinterest hidetext"><span>Pin It</span></span></a>
    
  </div>

  
</div>

    <h2>Example Sketch: AP Web Server</h2>
    <p>Not only can the ESP8266 connect to a WiFi network and interact 
with the Internet, but it can also set up a network of its own, allowing
 other devices to connect directly to it. This example demonstrates how 
to turn the ESP8266 into an <strong>access point</strong> (AP), and serve up web pages to any connected client.</p>

<p>Copy and paste the code from below, or download it <a href="https://cdn.sparkfun.com/assets/learn_tutorials/3/6/5/ESP8266_SoftAP_Server.zip">here</a>.</p>

<pre data-language="language:c
,c
"><div class="copy-code" data-code-id="code-0"><button class="btn btn-default btn-sm">Copy Code</button></div><code class="rainbow"><span class="comment">#include &lt;ESP8266WiFi.h&gt;</span>

<span class="comment">//////////////////////</span>
<span class="comment">// WiFi Definitions //</span>
<span class="comment">//////////////////////</span>
<span class="keyword">const</span> <span class="keyword">char</span> WiFiAPPSK[] <span class="keyword operator">=</span> <span class="string">"sparkfun"</span>;

<span class="comment">/////////////////////</span>
<span class="comment">// Pin Definitions //</span>
<span class="comment">/////////////////////</span>
<span class="keyword">const</span> <span class="keyword">int</span> LED_PIN <span class="keyword operator">=</span> <span class="constant numeric">5</span>; <span class="comment">// Thing's onboard, green LED</span>
<span class="keyword">const</span> <span class="keyword">int</span> ANALOG_PIN <span class="keyword operator">=</span> A0; <span class="comment">// The only analog pin on the Thing</span>
<span class="keyword">const</span> <span class="keyword">int</span> DIGITAL_PIN <span class="keyword operator">=</span> <span class="constant numeric">12</span>; <span class="comment">// Digital pin to be read</span>

WiFiServer <span class="function call">server</span>(<span class="constant numeric">80</span>);

<span class="keyword">void</span> <span class="function call">setup</span>() 
{
  <span class="function call">initHardware</span>();
  <span class="function call">setupWiFi</span>();
  server.<span class="function call">begin</span>();
}

<span class="keyword">void</span> <span class="function call">loop</span>() 
{
  <span class="comment">// Check if a client has connected</span>
  WiFiClient client <span class="keyword operator">=</span> server.<span class="function call">available</span>();
  <span class="keyword">if</span> (<span class="keyword operator">!</span>client) {
    <span class="keyword">return</span>;
  }

  <span class="comment">// Read the first line of the request</span>
  <span class="keyword">String</span> req <span class="keyword operator">=</span> client.<span class="function call">readStringUntil</span>(<span class="string">'\r'</span>);
  Serial.<span class="function call">println</span>(req);
  client.<span class="function call">flush</span>();

  <span class="comment">// Match the request</span>
  <span class="keyword">int</span> val <span class="keyword operator">=</span> <span class="keyword operator">-</span><span class="constant numeric">1</span>; <span class="comment">// We'll use 'val' to keep track of both the</span>
                <span class="comment">// request type (read/set) and value if set.</span>
  <span class="keyword">if</span> (req.<span class="function call">indexOf</span>(<span class="string">"/led/0"</span>) <span class="keyword operator">!</span><span class="keyword operator">=</span> <span class="keyword operator">-</span><span class="constant numeric">1</span>)
    val <span class="keyword operator">=</span> <span class="constant numeric">0</span>; <span class="comment">// Will write LED low</span>
  <span class="keyword">else</span> <span class="keyword">if</span> (req.<span class="function call">indexOf</span>(<span class="string">"/led/1"</span>) <span class="keyword operator">!</span><span class="keyword operator">=</span> <span class="keyword operator">-</span><span class="constant numeric">1</span>)
    val <span class="keyword operator">=</span> <span class="constant numeric">1</span>; <span class="comment">// Will write LED high</span>
  <span class="keyword">else</span> <span class="keyword">if</span> (req.<span class="function call">indexOf</span>(<span class="string">"/read"</span>) <span class="keyword operator">!</span><span class="keyword operator">=</span> <span class="keyword operator">-</span><span class="constant numeric">1</span>)
    val <span class="keyword operator">=</span> <span class="keyword operator">-</span><span class="constant numeric">2</span>; <span class="comment">// Will print pin reads</span>
  <span class="comment">// Otherwise request will be invalid. We'll say as much in HTML</span>

  <span class="comment">// Set GPIO5 according to the request</span>
  <span class="keyword">if</span> (val <span class="keyword operator">&gt;</span><span class="keyword operator">=</span> <span class="constant numeric">0</span>)
    <span class="function call">digitalWrite</span>(LED_PIN, val);

  client.<span class="function call">flush</span>();

  <span class="comment">// Prepare the response. Start with the common header:</span>
  <span class="keyword">String</span> s <span class="keyword operator">=</span> <span class="string">"HTTP/1.1 200 OK\r\n"</span>;
  s <span class="keyword operator">+</span><span class="keyword operator">=</span> <span class="string">"Content-Type: text/html\r\n\r\n"</span>;
  s <span class="keyword operator">+</span><span class="keyword operator">=</span> <span class="string">"&lt;!DOCTYPE HTML&gt;\r\n&lt;html&gt;\r\n"</span>;
  <span class="comment">// If we're setting the LED, print out a message saying we did</span>
  <span class="keyword">if</span> (val <span class="keyword operator">&gt;</span><span class="keyword operator">=</span> <span class="constant numeric">0</span>)
  {
    s <span class="keyword operator">+</span><span class="keyword operator">=</span> <span class="string">"LED is now "</span>;
    s <span class="keyword operator">+</span><span class="keyword operator">=</span> (val)?"on":<span class="string">"off"</span>;
  }
  <span class="keyword">else</span> <span class="keyword">if</span> (val <span class="keyword operator">=</span><span class="keyword operator">=</span> <span class="keyword operator">-</span><span class="constant numeric">2</span>)
  { <span class="comment">// If we're reading pins, print out those values:</span>
    s <span class="keyword operator">+</span><span class="keyword operator">=</span> <span class="string">"Analog Pin = "</span>;
    s <span class="keyword operator">+</span><span class="keyword operator">=</span> <span class="keyword">String</span>(<span class="function call">analogRead</span>(ANALOG_PIN));
    s <span class="keyword operator">+</span><span class="keyword operator">=</span> <span class="string">"&lt;br&gt;"</span>; <span class="comment">// Go to the next line.</span>
    s <span class="keyword operator">+</span><span class="keyword operator">=</span> <span class="string">"Digital Pin 12 = "</span>;
    s <span class="keyword operator">+</span><span class="keyword operator">=</span> <span class="keyword">String</span>(<span class="function call">digitalRead</span>(DIGITAL_PIN));
  }
  <span class="keyword">else</span>
  {
    s <span class="keyword operator">+</span><span class="keyword operator">=</span> <span class="string">"Invalid Request.&lt;br&gt; Try /led/1, /led/0, or /read."</span>;
  }
  s <span class="keyword operator">+</span><span class="keyword operator">=</span> <span class="string">"&lt;/html&gt;\n"</span>;

  <span class="comment">// Send the response to the client</span>
  client.<span class="keyword">print</span>(s);
  <span class="function call">delay</span>(<span class="constant numeric">1</span>);
  Serial.<span class="function call">println</span>(<span class="string">"Client disonnected"</span>);

  <span class="comment">// The client will actually be disconnected </span>
  <span class="comment">// when the function returns and 'client' object is detroyed</span>
}

<span class="keyword">void</span> <span class="function call">setupWiFi</span>()
{
  WiFi.<span class="function call">mode</span>(WIFI_AP);

  <span class="comment">// Do a little work to get a unique-ish name. Append the</span>
  <span class="comment">// last two bytes of the MAC (HEX'd) to "Thing-":</span>
  uint8_t mac[WL_MAC_ADDR_LENGTH];
  WiFi.<span class="function call">softAPmacAddress</span>(mac);
  <span class="keyword">String</span> macID <span class="keyword operator">=</span> <span class="keyword">String</span>(mac[WL_MAC_ADDR_LENGTH <span class="keyword operator">-</span> <span class="constant numeric">2</span>], HEX) <span class="keyword operator">+</span>
                 <span class="keyword">String</span>(mac[WL_MAC_ADDR_LENGTH <span class="keyword operator">-</span> <span class="constant numeric">1</span>], HEX);
  macID.<span class="function call">toUpperCase</span>();
  <span class="keyword">String</span> AP_NameString <span class="keyword operator">=</span> <span class="string">"ESP8266 Thing "</span> <span class="keyword operator">+</span> macID;

  <span class="keyword">char</span> AP_NameChar[AP_NameString.<span class="function call">length</span>() <span class="keyword operator">+</span> <span class="constant numeric">1</span>];
  <span class="function call">memset</span>(AP_NameChar, <span class="constant numeric">0</span>, AP_NameString.<span class="function call">length</span>() <span class="keyword operator">+</span> <span class="constant numeric">1</span>);

  <span class="keyword">for</span> (<span class="keyword">int</span> i<span class="keyword operator">=</span><span class="constant numeric">0</span>; i<span class="keyword operator">&lt;</span>AP_NameString.<span class="function call">length</span>(); i<span class="keyword operator">+</span><span class="keyword operator">+</span>)
    AP_NameChar[i] <span class="keyword operator">=</span> AP_NameString.<span class="function call">charAt</span>(i);

  WiFi.<span class="function call">softAP</span>(AP_NameChar, WiFiAPPSK);
}

<span class="keyword">void</span> <span class="function call">initHardware</span>()
{
  Serial.<span class="function call">begin</span>(<span class="constant numeric">115200</span>);
  <span class="function call">pinMode</span>(DIGITAL_PIN, INPUT_PULLUP);
  <span class="function call">pinMode</span>(LED_PIN, OUTPUT);
  <span class="function call">digitalWrite</span>(LED_PIN, LOW);
  <span class="comment">// Don't need to set ANALOG_PIN as input, </span>
  <span class="comment">// that's all it can be.</span>
}
</code></pre><div class="hide" id="code-0">#include &lt;ESP8266WiFi.h&gt;

//////////////////////
// WiFi Definitions //
//////////////////////
const char WiFiAPPSK[] = "sparkfun";

/////////////////////
// Pin Definitions //
/////////////////////
const int LED_PIN = 5; // Thing's onboard, green LED
const int ANALOG_PIN = A0; // The only analog pin on the Thing
const int DIGITAL_PIN = 12; // Digital pin to be read

WiFiServer server(80);

void setup() 
{
  initHardware();
  setupWiFi();
  server.begin();
}

void loop() 
{
  // Check if a client has connected
  WiFiClient client = server.available();
  if (!client) {
    return;
  }

  // Read the first line of the request
  String req = client.readStringUntil('\r');
  Serial.println(req);
  client.flush();

  // Match the request
  int val = -1; // We'll use 'val' to keep track of both the
                // request type (read/set) and value if set.
  if (req.indexOf("/led/0") != -1)
    val = 0; // Will write LED low
  else if (req.indexOf("/led/1") != -1)
    val = 1; // Will write LED high
  else if (req.indexOf("/read") != -1)
    val = -2; // Will print pin reads
  // Otherwise request will be invalid. We'll say as much in HTML

  // Set GPIO5 according to the request
  if (val &gt;= 0)
    digitalWrite(LED_PIN, val);

  client.flush();

  // Prepare the response. Start with the common header:
  String s = "HTTP/1.1 200 OK\r\n";
  s += "Content-Type: text/html\r\n\r\n";
  s += "&lt;!DOCTYPE HTML&gt;\r\n&lt;html&gt;\r\n";
  // If we're setting the LED, print out a message saying we did
  if (val &gt;= 0)
  {
    s += "LED is now ";
    s += (val)?"on":"off";
  }
  else if (val == -2)
  { // If we're reading pins, print out those values:
    s += "Analog Pin = ";
    s += String(analogRead(ANALOG_PIN));
    s += "&lt;br&gt;"; // Go to the next line.
    s += "Digital Pin 12 = ";
    s += String(digitalRead(DIGITAL_PIN));
  }
  else
  {
    s += "Invalid Request.&lt;br&gt; Try /led/1, /led/0, or /read.";
  }
  s += "&lt;/html&gt;\n";

  // Send the response to the client
  client.print(s);
  delay(1);
  Serial.println("Client disonnected");

  // The client will actually be disconnected 
  // when the function returns and 'client' object is detroyed
}

void setupWiFi()
{
  WiFi.mode(WIFI_AP);

  // Do a little work to get a unique-ish name. Append the
  // last two bytes of the MAC (HEX'd) to "Thing-":
  uint8_t mac[WL_MAC_ADDR_LENGTH];
  WiFi.softAPmacAddress(mac);
  String macID = String(mac[WL_MAC_ADDR_LENGTH - 2], HEX) +
                 String(mac[WL_MAC_ADDR_LENGTH - 1], HEX);
  macID.toUpperCase();
  String AP_NameString = "ESP8266 Thing " + macID;

  char AP_NameChar[AP_NameString.length() + 1];
  memset(AP_NameChar, 0, AP_NameString.length() + 1);

  for (int i=0; i&lt;AP_NameString.length(); i++)
    AP_NameChar[i] = AP_NameString.charAt(i);

  WiFi.softAP(AP_NameChar, WiFiAPPSK);
}

void initHardware()
{
  Serial.begin(115200);
  pinMode(DIGITAL_PIN, INPUT_PULLUP);
  pinMode(LED_PIN, OUTPUT);
  digitalWrite(LED_PIN, LOW);
  // Don't need to set ANALOG_PIN as input, 
  // that's all it can be.
}
</div>

<p>After uploading this sketch, find another device that you can connect
 to a WiFi network – phone, laptop, etc. Look for a network called 
“Thing-XXXX”, where XXXX is the last 2 bytes of the Thing’s MAC address.</p>

<p style="text-align:center;"> <a href="https://cdn.sparkfun.com/assets/learn_tutorials/3/6/5/thing-ap-connect.PNG"><img src="ESP8266%20Thing%20Hookup%20Guide%20-%20learn.sparkfun.com_files/thing-ap-connect.PNG" alt="Connecting to the Thing AP"></a></p>

<p>The sketch sets the network’s password to “sparkfun”.</p>

<p>After connecting to your Thing’s AP network, load up a browser and point it to <code>192.168.4.1/read</code>. The Thing should serve up a web page showing you its ADC and digital pin 12 readings:</p>

<p style="text-align:center;"> <a href="https://cdn.sparkfun.com/assets/learn_tutorials/3/6/5/thing-ap-web.PNG"><img src="ESP8266%20Thing%20Hookup%20Guide%20-%20learn.sparkfun.com_files/thing-ap-web.PNG" alt="The Thing serving up a web page"></a></p>

<p>After that, give <code>192.168.4.1/led/0</code> and <code>192.168.4.1/led/1</code> a try, and keep an eye on the Thing’s green LED while you do.</p>

<p>As always, check through the code comments to get a line-by-line breakdown of what’s going on.</p>
        <div class="share-link-inline">

  <a class="share-link-toggle" href="#">
    <span class="share-title">
      <span class="sfe-icon-share"></span>
      Share    </span>
  </a>

  <div class="share-link-inner dialog">
    Use this URL to share:<br>
    <input class="form-control input-sm" value="http://sfe.io/t365" onclick="$(this).select();" type="text">

    <div class="share-social">

      <a rel="nofollow" onclick="return $(this).sfeutil('track_link',this,'Share','clicked','googleplus');" href="https://plus.google.com/share?url=http%3A%2F%2Fsfe.io%2Ft365" title="Share on Google+"><span class="sfe-icon-google-plus hidetext"><span>Share on Google+</span></span></a>

      <a rel="nofollow" onclick="return $(this).sfeutil('track_link',this,'Share','clicked','tumblr');" href="https://www.tumblr.com/share/link?url=http%3A%2F%2Fsfe.io%2Ft365&amp;name=ESP8266+Thing+Hookup+Guide" title="Share on Tumblr"><span class="sfe-icon-tumblr hidetext"><span>Share on Tumblr</span></span></a>

      <a rel="nofollow" onclick="return $(this).sfeutil('track_link',this,'Share','clicked','reddit');" href="https://www.reddit.com/submit?url=http%3A%2F%2Fsfe.io%2Ft365" title="Submit to reddit"><span class="sfe-icon-reddit hidetext"><span>Submit to reddi</span></span></a>

    </div>

    </div>
  
  <div class="share-social">

    <a rel="nofollow" onclick="return $(this).sfeutil('track_link',this,'Share','clicked','twitter');" href="https://twitter.com/intent/tweet?text=ESP8266+Thing+Hookup+Guide&amp;url=http%3A%2F%2Fsfe.io%2Ft365&amp;via=sparkfun" title="Share on Twitter"><span class="sfe-icon-twitter hidetext"><span>Share on Twitter</span></span></a>

    <a rel="nofollow" onclick="return $(this).sfeutil('track_link',this,'Share','clicked','facebook');" href="http://www.facebook.com/sharer.php?u=http%3A%2F%2Fsfe.io%2Ft365&amp;t=ESP8266+Thing+Hookup+Guide" title="Share on Facebook"><span class="sfe-icon-facebook-nobox hidetext"><span>Share on Facebook</span></span></a>

          <a rel="nofollow" onclick="return $(this).sfeutil('track_link',this,'Share','clicked','pinterest');" href="https://www.pinterest.com/pin/create/button/?url=http%3A%2F%2Fsfe.io%2Ft365&amp;media=https%3A%2F%2Fcdn.sparkfun.com%2F%2Fr%2F500-1000%2Fassets%2Flearn_tutorials%2F3%2F6%2F5%2Fproduct-angled.jpg&amp;description=ESP8266+Thing+Hookup+Guide" title="Pin It"><span class="sfe-icon-pinterest hidetext"><span>Pin It</span></span></a>
    
  </div>

  
</div>

    <hr>

    <div class="page-nav clearfix">

      <div class="pull-right">
        <a href="https://learn.sparkfun.com/tutorials/esp8266-thing-hookup-guide/all" class="btn">
          View as a single page
        </a>

                  <a href="https://learn.sparkfun.com/tutorials/esp8266-thing-hookup-guide/example-sketch-goodnight-thing-sleep-mode" class="btn btn-primary">
            Next Page →<br>
            <small>Example Sketch: Goodnight Thing (Sleep Mode)</small>
          </a>
              </div>

              <a href="https://learn.sparkfun.com/tutorials/esp8266-thing-hookup-guide/example-sketch-posting-to-phant" class="btn">
          ← Previous Page<br>
          <small>Example Sketch: Posting to Phant</small>
        </a>
      
    </div>
  </div>

  <div class="col-sm-4" id="nav-pages">

    <div id="tutorial-pages" class="list-group">
      <a class="list-group-item"><b>Pages</b></a>
              <a data-pageid="2860" class="list-group-item " href="https://learn.sparkfun.com/tutorials/esp8266-thing-hookup-guide/introduction">
          Introduction        </a>
              <a data-pageid="2863" class="list-group-item " href="https://learn.sparkfun.com/tutorials/esp8266-thing-hookup-guide/hardware-overview">
          Hardware Overview        </a>
              <a data-pageid="2864" class="list-group-item " href="https://learn.sparkfun.com/tutorials/esp8266-thing-hookup-guide/powering-the-thing">
          Powering the Thing        </a>
              <a data-pageid="2865" class="list-group-item " href="https://learn.sparkfun.com/tutorials/esp8266-thing-hookup-guide/programming-the-thing">
          Programming the Thing        </a>
              <a data-pageid="3011" class="list-group-item " href="https://learn.sparkfun.com/tutorials/esp8266-thing-hookup-guide/hardware-assembly">
          Hardware Assembly        </a>
              <a data-pageid="2866" class="list-group-item " href="https://learn.sparkfun.com/tutorials/esp8266-thing-hookup-guide/installing-the-esp8266-arduino-addon">
          Installing the ESP8266 Arduino Addon        </a>
              <a data-pageid="2867" class="list-group-item " href="https://learn.sparkfun.com/tutorials/esp8266-thing-hookup-guide/example-sketch-posting-to-phant">
          Example Sketch: Posting to Phant        </a>
              <a data-pageid="2868" class="list-group-item active" href="https://learn.sparkfun.com/tutorials/esp8266-thing-hookup-guide/example-sketch-ap-web-server">
          Example Sketch: AP Web Server        </a>
              <a data-pageid="3003" class="list-group-item " href="https://learn.sparkfun.com/tutorials/esp8266-thing-hookup-guide/example-sketch-goodnight-thing-sleep-mode">
          Example Sketch: Goodnight Thing (Sleep Mode)        </a>
              <a data-pageid="2870" class="list-group-item " href="https://learn.sparkfun.com/tutorials/esp8266-thing-hookup-guide/using-the-arduino-addon">
          Using the Arduino Addon        </a>
              <a data-pageid="2869" class="list-group-item " href="https://learn.sparkfun.com/tutorials/esp8266-thing-hookup-guide/resources--going-further">
          Resources &amp; Going Further        </a>
          </div>

    <div class="list-group">
      <a class="list-group-item" href="https://learn.sparkfun.com/tutorials/esp8266-thing-hookup-guide/discuss">
        Comments
        <span class="badge">19</span>
      </a>
      <a class="list-group-item" href="https://learn.sparkfun.com/tutorials/esp8266-thing-hookup-guide/all">
        Single Page
      </a>
      <a class="list-group-item" hhref="#" onclick="window.print(); return false;">
        Print
      </a>
    </div>

<!--
        <ul class="list-group">
        <li class="list-group-item"><b>Next Steps</b></li>
                            <li class="list-group-item"><a href="https://learn.sparkfun.com/tutorials/analog-to-digital-conversion">Analog to Digital Conversion</a></li>
              </ul>
  -->

    <ul class="list-group">
      <li class="list-group-item"><b>Tags</b></li>
      <li class="list-group-item"><ul class="tags-list">
  <li>
    <a class="tag" href="https://learn.sparkfun.com/tutorials/tags/arduino">Arduino</a>  </li>
  <li>
    <a class="tag" href="https://learn.sparkfun.com/tutorials/tags/esp8266">ESP8266</a>  </li>
  <li>
    <a class="tag" href="https://learn.sparkfun.com/tutorials/tags/internet-of-things">Internet of Things</a>  </li>
  <li>
    <a class="tag" href="https://learn.sparkfun.com/tutorials/tags/wifi">WiFi</a>  </li>
</ul>
</li>
    </ul>

    <ul class="list-group">
      <li class="list-group-item"><b>License</b></li>
      <li class="list-group-item">
        <span class="sfe-icon-cc">
          <span class="visuallyhidden">Creative Commons</span>
        </span>
        <small>tutorials are <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="new">CC BY-NC-SA 3.0</a></small>
      </li>
    </ul>

  </div>

</div>

<script type="text/javascript">
  require(['tutorial'], function() {
    $('#tutorial').tutorial();
  });
</script>

      </div> <!-- /container -->
    </div> <!-- /content -->

    
<footer>

<div class="social">
  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-sm-12 col-md-12">
        <div class="sharing-ingenuity">
          <span class="sfe-icon-flame"></span>
          <span class="text"><span class="text-top">Sharing<br></span>Ingenuity</span>
        </div>
        <ul class="spew">
          <li><a href="http://www.github.com/sparkfun" target="_blank" class="sfe-icon-github"><span class="visuallyhidden">GitHub</span></a></li>
          <li><a href="http://www.youtube.com/sparkfun" target="_blank" class="sfe-icon-youtube"><span class="visuallyhidden">YouTube</span></a></li>
          <li><a href="http://www.vimeo.com/sparkfun" target="_blank" class="sfe-icon-vimeo"><span class="visuallyhidden">Vimeo</span></a></li>
          <li><a href="http://www.facebook.com/SparkFun" target="_blank" class="sfe-icon-facebook"><span class="visuallyhidden">Facebook</span></a></li>
          <li><a href="https://plus.google.com/106084846822083498483/" target="_blank" class="sfe-icon-google-plus"><span class="visuallyhidden">Google Plus</span></a></li>
          <li><a href="http://www.flickr.com/photos/sparkfun/" target="_blank" class="sfe-icon-flickr"><span class="visuallyhidden">Flickr</span></a></li>
          <li><a href="https://twitter.com/#%21/sparkfun" target="_blank" class="sfe-icon-twitter"><span class="visuallyhidden">Twitter</span></a></li>
          <li><a href="https://www.sparkfun.com/feeds" class="sfe-icon-feed"><span class="visuallyhidden">RSS</span></a></li>
        </ul>
        <div class="newsletter">
          <form action="https://learn.sparkfun.com/newsletter/subscribe_email" method="post" class="form-inline" id="js-newsletter_subscribe">
            <div class="form-group">
              <input class="form-control" name="newsletter_email" placeholder="Email Address" type="email">
            </div>
            <div class="form-group">
              <input class="btn btn-default" value="Subscribe to Education Newsletter" type="submit">
            </div>
          </form>
        </div>
      </div>
    </div><!-- end .row -->
  </div><!-- end .container -->
</div><!-- end .social -->

<div class="container">

    <div class="row">

    <div class="subfooter subfooter-about">
      <p>
        <b>SparkFun</b> is an online retail store that sells the bits and pieces to
        make your electronics projects possible. Whether it's a robot that can
        cook your breakfast or a GPS cat tracking device, our products and
        resources are designed to make the world of electronics more accessible.
      </p>
      <p>
        In addition to products, SparkFun also offers
        classes and online tutorials to help educate
        individuals in the wonderful world of embedded electronics.
      </p>

      <div class="row">

        <div class="col-sm-6">
          <ul>
            <li><b>About Us</b>
            </li><li><a href="https://www.sparkfun.com/static/about">About SparkFun</a></li>
            <li><a href="https://learn.sparkfun.com/about">SparkFun Education</a></li>
            <li><a title="RSS Feeds" href="https://www.sparkfun.com/feeds">Feeds <span class="sfe-icon-feed"></span></a></li>
            <li><a href="https://www.sparkfun.com/jobs">Jobs</a></li>
            <li><a href="https://www.sparkfun.com/static/contact">Contact</a></li>
          </ul>
        </div>

        <div class="col-sm-6">
          <ul>
            <li><b>Help</b></li>
            <li><a href="https://www.sparkfun.com/support">Customer Service</a></li>
            <li><a href="https://www.sparkfun.com/support#ShippingPolicy">Shipping</a></li>
            <li><a href="https://www.sparkfun.com/returns">Return Policy</a></li>
            <li><a href="https://www.sparkfun.com/static/faq">FAQ</a></li>
                      </ul>
        </div>

      </div>

      <div class="row">

        <div class="col-sm-6">
          <ul>
            <li><b>Programs</b></li>
            <li><a href="https://learn.sparkfun.com/educator_discount">Educator Discount</a></li>
            <li><a href="https://www.sparkfun.com/sponsor">Partner with SparkFun</a></li>
            <li><a href="https://www.sparkfun.com/project_calls">Tell Us About Your Project</a></li>
            <li><a href="https://learn.sparkfun.com/tutorials/how-to-sell-your-widget-on-sparkfun">Sell Your Widget on SparkFun</a></li>
            <li><a href="https://www.sparkfun.com/distributors/apply">Become a SparkFun Distributor</a></li>
          </ul>
        </div>

        <div class="col-sm-6">
          <ul>
            <li><b>Community</b></li>
            <li><a href="https://forum.sparkfun.com/">Forum</a></li>
            <li><a href="https://www.sparkfun.com/news/263">SparkFun IRC Channel</a></li>
            <li><a href="https://www.sparkfun.com/quiz">Take the SparkFun Quiz</a></li>
            <li><a href="https://www.kickstarter.com/pages/sparkfun">SparkFun Kickstarter Projects</a></li>
            <li><a href="https://www.sparkfun.com/distributors">Distributors</a></li>
          </ul>
        </div>

      </div><!-- end .row -->

    </div>

    <div id="feedback" class="subfooter subfooter-woym">
      <form id="woym_form" class="feedback" action="https://learn.sparkfun.com/feedback/mind.json" onsubmit="$(this).sfeutil('mind_feedback'); return false;" method="POST">
        <div class="error" id="error_feedback" style="display: none"></div>
        <input name="sparkaptcha" id="sparkaptcha" value="0" type="hidden">

        <div class="form-group">
          <label for="feedback_textarea" class="control-label">What's on your mind?</label>
          <div class="controls">
            <textarea id="feedback_textarea" class="form-control" name="feedback_text" required=""></textarea>
            <div class="error" id="error_feedback_text" style="display: none"></div>
          </div>
        </div>

        <div class="form-group">
          <label for="feedback_dest" class="control-label">For which department?</label>
          <select name="dest" class="form-control" id="feedback_dest">
            <option selected="selected" value="general">General</option>
            <option value="cust">Customer Service</option>
            <option value="tech">Tech Support</option>
                          <option value="edu">Education Department</option>
                      </select>
        </div>

        <div class="form-group">
          <label for="feedback_email" class="control-label">
            Please include your email address if you'd like us to respond to a specific question.
          </label>

          <div class="input-group">
            <span class="input-group-addon"><span class="glyphicon glyphicon-envelope"></span></span>
            <input class="form-control" id="feedback_email" name="email" placeholder="email address" type="text">
          </div>
          <div class="error" id="error_feedback_email" style="display: none"></div>

        </div>

        <button type="submit">Submit</button>
      </form>
    </div>

  </div><!-- end .row -->
  
  <ul class="copyleft">
    <li>SparkFun Electronics <a href="https://www.sparkfun.com/news/300">®</a></li>
    <li><a href="http://maps.google.com/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=6333+Dry+Creek+Parkway,+Niwot,+CO+80503">Niwot, Colorado</a></li>
    <li><a href="https://www.sparkfun.com/support">Customer Service</a></li>
    <li><a href="https://www.sparkfun.com/sitemap">Site Map</a></li>
    <li><a href="https://www.sparkfun.com/terms">Terms of Service</a></li>
    <li><a href="https://www.sparkfun.com/privacy">Privacy Policy</a></li>
    <li class="desktop-toggle">
              <a href="https://www.sparkfun.com/account/mobile_toggle?redirect=%2Flearn%2Ftutorials%2Fesp8266-thing-hookup-guide%2Fexample-sketch-ap-web-server">Desktop Site</a>          </li>
  </ul>

</div><!-- end .container -->

</footer>

    <div class="nav-account">
  <ul class="nav nav-tabs">
    <li class="visible-xs">
      <a class="nav-toggle-account back" href="#">Your Account</a>
    </li>
          <li class="">
        <a href="https://www.sparkfun.com/account/login?redirect=%2Flearn%2Ftutorials%2Fesp8266-thing-hookup-guide%2Fexample-sketch-ap-web-server" data-toggle="modal" data-target="#login_modal" data-remote="false">Log In</a>
      </li>
          <li class="">
        <a href="https://www.sparkfun.com/account/make">Register</a>
      </li>
      </ul>
</div>

      </div><!-- end .wrapper-inner -->
    </div><!-- end .wrapper -->

    <!-- Login Modal -->
<div class="modal fade" id="login_modal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title">Log In</h4>
        <p class="modal-header-msg"></p>
      </div>
      <div class="modal-body">
        <form role="form" action="https://www.sparkfun.com/account/login" method="post">
          <input name="redirect" value="/learn/tutorials/esp8266-thing-hookup-guide/example-sketch-ap-web-server" type="hidden">
          <div class="form-group">
            <label for="login-username">Email</label>
            <input tabindex="1" name="user" id="login-username" class="form-control" type="email">
          </div>
          <div class="form-group">
            <label for="login-password">Password</label>
            <input tabindex="2" name="passwd" id="login-password" class="form-control" type="password">
          </div>
          <div class="form-group">
            <input value="Log In" tabindex="3" class="btn btn-action" type="submit">
          </div>
        </form>
        <p>
          <a href="https://www.sparkfun.com/account/forgot_password">Forgot your password?</a>          <br>
          No account? <a id="btn_register_account" href="https://www.sparkfun.com/account/make">Register one!</a>        </p>
      </div>
    </div>
  </div>
</div>
  


<div style="position: absolute; left: 0px; top: -9999px; width: 15px; height: 15px; z-index: 999999999;" class="global-zeroclipboard-container" id="global-zeroclipboard-html-bridge">      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" height="100%" width="100%">         <param name="movie" value="/js/ZeroClipboard.swf?noCache=1447853824268">         <param name="allowScriptAccess" value="sameDomain">         <param name="scale" value="exactfit">         <param name="loop" value="false">         <param name="menu" value="false">         <param name="quality" value="best">         <param name="bgcolor" value="#ffffff">         <param name="wmode" value="transparent">         <param name="flashvars" value="trustedOrigins=learn.sparkfun.com%2C%2F%2Flearn.sparkfun.com%2Chttps%3A%2F%2Flearn.sparkfun.com&amp;jsModuleId=ZeroClipboard.min">         <embed src="ESP8266%20Thing%20Hookup%20Guide%20-%20learn.sparkfun.com_files/ZeroClipboard.swf" loop="false" menu="false" quality="best" bgcolor="#ffffff" name="global-zeroclipboard-flash-bridge" allowscriptaccess="sameDomain" allowfullscreen="false" type="application/x-shockwave-flash" wmode="transparent" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="trustedOrigins=learn.sparkfun.com%2C%2F%2Flearn.sparkfun.com%2Chttps%3A%2F%2Flearn.sparkfun.com&amp;jsModuleId=ZeroClipboard.min" scale="exactfit" height="100%" width="100%">                </object></div><ul style="display: none;" tabindex="0" id="ui-id-1" class="ui-autocomplete ui-front ui-menu ui-widget ui-widget-content ui-corner-all"></ul></body></html>